// src/icons.c
#include <gbdk/platform.h> // MUST be first
#include <gb/gb.h>
#include "ui.h"

#define ROW(b7, b6, b5, b4, b3, b2, b1, b0) \
    ((uint8_t)((b7 << 7) | (b6 << 6) | (b5 << 5) | (b4 << 4) | (b3 << 3) | (b2 << 2) | (b1 << 1) | (b0)))

// 4 icons Ã— 8 bytes (1bpp) each. Tweak pixels as you like.
extern const uint8_t ICONS_1BPP[] = {
    // BONE (food)
    ROW(0, 0, 0, 0, 0, 1, 1, 0),
    ROW(0, 0, 0, 0, 1, 1, 1, 1),
    ROW(0, 0, 0, 1, 1, 1, 1, 1),
    ROW(0, 0, 0, 1, 1, 1, 1, 0),
    ROW(0, 0, 0, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 0, 0, 0),
    ROW(1, 1, 0, 0, 0, 0, 0, 0),
    ROW(0, 1, 0, 0, 0, 0, 0, 0),

    // WATER (droplet)
    ROW(0, 0, 0, 1, 0, 0, 0, 0),
    ROW(0, 0, 0, 1, 0, 0, 0, 0),
    ROW(0, 0, 1, 1, 1, 0, 0, 0),
    ROW(0, 0, 1, 1, 1, 0, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 0, 0, 0),
    ROW(0, 0, 0, 0, 0, 0, 0, 0),

    // MED (cross)
    ROW(0, 0, 0, 0, 0, 0, 0, 0),
    ROW(0, 0, 0, 1, 1, 0, 0, 0),
    ROW(0, 0, 0, 1, 1, 0, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 1, 0),
    ROW(0, 1, 1, 1, 1, 1, 1, 0),
    ROW(0, 0, 0, 1, 1, 0, 0, 0),
    ROW(0, 0, 0, 1, 1, 0, 0, 0),
    ROW(0, 0, 0, 0, 0, 0, 0, 0),

    // BATTERY
    ROW(0, 0, 1, 1, 0, 0, 0, 0),
    ROW(0, 1, 1, 1, 1, 0, 0, 0),
    ROW(0, 1, 1, 1, 1, 0, 0, 0),
    ROW(0, 1, 1, 1, 1, 0, 0, 0),
    ROW(0, 1, 1, 1, 1, 0, 0, 0),
    ROW(0, 1, 1, 1, 1, 0, 0, 0),
    ROW(0, 1, 1, 1, 1, 0, 0, 0),
    ROW(0, 0, 0, 0, 0, 0, 0, 0),
    // BARS
    // 0
    ROW(0, 0, 0, 0, 0, 0, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 1, 0),
    // 1
    ROW(0, 0, 0, 0, 0, 0, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 1, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    // 2
    ROW(0, 0, 0, 0, 0, 0, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 1, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    // 3
    ROW(0, 0, 0, 0, 0, 0, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 1, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    // 4
    ROW(0, 0, 0, 0, 0, 0, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 0, 0, 1, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 1, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    // 5
    ROW(0, 0, 0, 0, 0, 0, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 1, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    // 6
    ROW(0, 0, 0, 0, 0, 0, 0, 0),
    ROW(0, 1, 1, 1, 1, 1, 1, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
    ROW(0, 0, 1, 1, 1, 1, 0, 0),
};
#define ICON_COUNT ((uint8_t)(sizeof(ICONS_1BPP) / 8u))

void ui_load_icons(void)
{
    set_bkg_1bpp_data(ICON_BASE, ICON_COUNT, ICONS_1BPP);
}
void ui_icons_refresh(void)
{
    ui_load_icons();
}
// Draw a single icon tile at BG tile coords (x,y)
void ui_put_icon(uint8_t x, uint8_t y, uint8_t id)
{
    uint8_t tile = (uint8_t)(ICON_BASE + (uint8_t)id);
    set_bkg_tiles(x, y, 1, 1, &tile);
}